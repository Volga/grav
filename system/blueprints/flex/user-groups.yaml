title: Flex User Groups
description: Manage your User Groups in Flex.
type: flex-objects

# Extends user group
extends@:
  type: group
  context: blueprints://user

# Flex configuration
config:
  # Administration Configuration (needs Flex-Objects plugin)
  admin:
    # Admin route
    route: '/accounts/groups'

    # Admin menu
    menu:
      base:
        location: '/accounts'
        route: '/accounts/groups'
        index: 1
        title: PLUGIN_ADMIN.ACCOUNTS
        icon: fa-users
        authorize: ['admin.users.list', 'admin.super']
        priority: 6

    # Admin template type (folder)
    template: grav-user-groups

    # Permissions
    permissions:
      admin.users:
        type: crudl
        label: User Groups

    # List view
    list:
      # Fields shown in the list view
      fields:
        groupname:
          link: edit
          search: true
        readableName:
          search: true
        description:
          search: true
      # Extra options
      options:
        per_page: 20
        order:
          by: groupname
          dir: asc

    # Edit view
    edit:
      title:
        template: '{{ object.readableName ?? object.groupname }}'

  # Site Configuration
  site:
    # Hide from flex types
    hidden: true
    templates:
      collection:
        # Lookup for the template layout files for collections of objects
        paths:
          - 'flex/{TYPE}/collection/{LAYOUT}{EXT}'
      object:
        # Lookup for the template layout files for objects
        paths:
          - 'flex/{TYPE}/object/{LAYOUT}{EXT}'
      defaults:
        # Default template {TYPE}; overridden by filename of this blueprint if template folder exists
        type: grav-user-groups
        # Default template {LAYOUT}; can be overridden in render calls (usually Twig in templates)
        layout: default

  # Data Configuration
  data:
    object: 'Grav\Common\Flex\UserGroups\UserGroupObject'
    collection: 'Grav\Common\Flex\UserGroups\UserGroupCollection'
    index: 'Grav\Common\Flex\UserGroups\UserGroupIndex'
    storage:
      class: 'Grav\Framework\Flex\Storage\SimpleStorage'
      options:
        formatter:
          class: 'Grav\Framework\File\Formatter\YamlFormatter'
        folder: 'user://config/groups.yaml'
        key: groupname
    search:
      options:
        contains: 1
      fields:
        - key
        - groupname
        - description
